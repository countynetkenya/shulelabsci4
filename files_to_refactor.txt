app/Modules/Admin/Controllers/Students.php:35:        $students = $db->table('ci4_users')
app/Modules/Admin/Controllers/Students.php:36:            ->select('ci4_users.*, school_users.school_id, schools.name as school_name')
app/Modules/Admin/Controllers/Students.php:37:            ->join('ci4_user_roles', 'ci4_users.id = ci4_user_roles.user_id')
app/Modules/Admin/Controllers/Students.php:38:            ->join('ci4_roles', 'ci4_user_roles.role_id = ci4_roles.id')
app/Modules/Admin/Controllers/Students.php:39:            ->join('school_users', 'ci4_users.id = school_users.user_id', 'left')
app/Modules/Admin/Controllers/Students.php:41:            ->where('ci4_roles.name', 'student')
app/Modules/Admin/Controllers/Students.php:43:            ->orderBy('ci4_users.username', 'ASC')
app/Modules/Admin/Controllers/Students.php:84:            'username' => 'required|min_length[3]|max_length[50]|is_unique[ci4_users.username]',
app/Modules/Admin/Controllers/Students.php:85:            'email' => 'required|valid_email|is_unique[ci4_users.email]',
app/Modules/Admin/Controllers/Students.php:110:            $db->table('ci4_users')->insert($userData);
app/Modules/Admin/Controllers/Students.php:114:            $studentRole = $db->table('ci4_roles')->where('name', 'student')->get()->getRow();
app/Modules/Admin/Controllers/Students.php:118:                $db->table('ci4_user_roles')->insert([
app/Modules/Admin/Controllers/Students.php:194:            'username' => "required|min_length[3]|max_length[50]|is_unique[ci4_users.username,id,{$id}]",
app/Modules/Admin/Controllers/Students.php:195:            'email' => "required|valid_email|is_unique[ci4_users.email,id,{$id}]",
app/Modules/Admin/Controllers/Classes.php:192:        return $db->table('ci4_users')
app/Modules/Admin/Controllers/Classes.php:193:            ->select('ci4_users.id, ci4_users.username, ci4_users.first_name, ci4_users.last_name')
app/Modules/Admin/Controllers/Classes.php:194:            ->join('ci4_user_roles', 'ci4_users.id = ci4_user_roles.user_id')
app/Modules/Admin/Controllers/Classes.php:195:            ->join('ci4_roles', 'ci4_user_roles.role_id = ci4_roles.id')
app/Modules/Admin/Controllers/Classes.php:196:            ->join('school_users', 'ci4_users.id = school_users.user_id')
app/Modules/Admin/Controllers/Classes.php:197:            ->where('ci4_roles.name', 'teacher')
app/Modules/Admin/Controllers/Classes.php:199:            ->orderBy('ci4_users.username', 'ASC')
app/Modules/Admin/Controllers/Teachers.php:35:        $teachers = $db->table('ci4_users')
app/Modules/Admin/Controllers/Teachers.php:36:            ->select('ci4_users.*, school_users.school_id, schools.name as school_name')
app/Modules/Admin/Controllers/Teachers.php:37:            ->join('ci4_user_roles', 'ci4_users.id = ci4_user_roles.user_id')
app/Modules/Admin/Controllers/Teachers.php:38:            ->join('ci4_roles', 'ci4_user_roles.role_id = ci4_roles.id')
app/Modules/Admin/Controllers/Teachers.php:39:            ->join('school_users', 'ci4_users.id = school_users.user_id', 'left')
app/Modules/Admin/Controllers/Teachers.php:41:            ->where('ci4_roles.name', 'teacher')
app/Modules/Admin/Controllers/Teachers.php:43:            ->orderBy('ci4_users.username', 'ASC')
app/Modules/Admin/Controllers/Teachers.php:84:            'username' => 'required|min_length[3]|max_length[50]|is_unique[ci4_users.username]',
app/Modules/Admin/Controllers/Teachers.php:85:            'email' => 'required|valid_email|is_unique[ci4_users.email]',
app/Modules/Admin/Controllers/Teachers.php:110:            $db->table('ci4_users')->insert($userData);
app/Modules/Admin/Controllers/Teachers.php:114:            $teacherRole = $db->table('ci4_roles')->where('name', 'teacher')->get()->getRow();
app/Modules/Admin/Controllers/Teachers.php:118:                $db->table('ci4_user_roles')->insert([
app/Modules/Admin/Controllers/Teachers.php:183:            'username' => "required|min_length[3]|max_length[50]|is_unique[ci4_users.username,id,{$id}]",
app/Modules/Admin/Controllers/Teachers.php:184:            'email' => "required|valid_email|is_unique[ci4_users.email,id,{$id}]",
app/Modules/Teacher/Controllers/Attendance.php:60:            ->select('ci4_users.id, ci4_users.username, ci4_users.first_name, ci4_users.last_name')
app/Modules/Teacher/Controllers/Attendance.php:61:            ->join('ci4_users', 'student_enrollments.student_id = ci4_users.id')
app/Modules/Teacher/Controllers/Attendance.php:63:            ->orderBy('ci4_users.username', 'ASC')
app/Modules/Teacher/Controllers/Dashboard.php:51:        return $db->table('ci4_users')
app/Modules/Teacher/Controllers/Dashboard.php:52:            ->select('ci4_users.*, schools.name as school_name')
app/Modules/Teacher/Controllers/Dashboard.php:53:            ->join('school_users', 'ci4_users.id = school_users.user_id', 'left')
app/Modules/Teacher/Controllers/Dashboard.php:55:            ->where('ci4_users.id', $this->userID)
app/Modules/Teacher/Controllers/Dashboard.php:115:            ->select('grades.*, ci4_users.username as student_name, courses.name as course_name')
app/Modules/Teacher/Controllers/Dashboard.php:116:            ->join('ci4_users', 'grades.student_id = ci4_users.id', 'left')
app/Modules/Teacher/Controllers/Gradebook.php:58:            ->select('ci4_users.id, ci4_users.username, ci4_users.first_name, ci4_users.last_name, grades.score, grades.grade, grades.id as grade_id')
app/Modules/Teacher/Controllers/Gradebook.php:59:            ->join('ci4_users', 'student_enrollments.student_id = ci4_users.id')
app/Modules/Teacher/Controllers/Gradebook.php:60:            ->join('grades', 'ci4_users.id = grades.student_id AND grades.course_id = ' . $courseID, 'left')
app/Modules/Teacher/Controllers/Gradebook.php:62:            ->orderBy('ci4_users.username', 'ASC')
app/Modules/Student/Controllers/Dashboard.php:52:        return $db->table('ci4_users')
app/Modules/Student/Controllers/Dashboard.php:53:            ->select('ci4_users.*, schools.name as school_name')
app/Modules/Student/Controllers/Dashboard.php:54:            ->join('school_users', 'ci4_users.id = school_users.user_id', 'left')
app/Modules/Student/Controllers/Dashboard.php:56:            ->where('ci4_users.id', $this->userID)
app/Database/Seeds/Ci4DefaultSuperadminSeeder.php:25:        $existingSuperadmin = $this->db->table('ci4_user_roles ur')
app/Database/Seeds/Ci4DefaultSuperadminSeeder.php:26:            ->join('ci4_roles r', 'r.id = ur.role_id')
app/Database/Seeds/Ci4DefaultSuperadminSeeder.php:61:        $this->db->table('ci4_users')->insert($userData);
app/Database/Seeds/Ci4DefaultSuperadminSeeder.php:65:        $superAdminRole = $this->db->table('ci4_roles')
app/Database/Seeds/Ci4DefaultSuperadminSeeder.php:72:            $this->db->table('ci4_user_roles')->insert([
app/Database/Seeds/MultiSchoolUserSeeder.php:83:            'superadmin'   => $db->table('ci4_roles')->where('role_name', 'Super Admin')->get()->getRow()->id ?? 1,
app/Database/Seeds/MultiSchoolUserSeeder.php:84:            'admin'        => $db->table('ci4_roles')->where('role_name', 'Admin')->get()->getRow()->id ?? 2,
app/Database/Seeds/MultiSchoolUserSeeder.php:85:            'teacher'      => $db->table('ci4_roles')->where('role_name', 'Teacher')->get()->getRow()->id ?? 3,
app/Database/Seeds/MultiSchoolUserSeeder.php:86:            'student'      => $db->table('ci4_roles')->where('role_name', 'Student')->get()->getRow()->id ?? 4,
app/Database/Seeds/MultiSchoolUserSeeder.php:87:            'parent'       => $db->table('ci4_roles')->where('role_name', 'Parent')->get()->getRow()->id ?? 5,
app/Database/Seeds/MultiSchoolUserSeeder.php:88:            'accountant'   => $db->table('ci4_roles')->where('role_name', 'Accountant')->get()->getRow()->id ?? 6,
app/Database/Seeds/MultiSchoolUserSeeder.php:89:            'librarian'    => $db->table('ci4_roles')->where('role_name', 'Librarian')->get()->getRow()->id ?? 7,
app/Database/Seeds/MultiSchoolUserSeeder.php:90:            'receptionist' => $db->table('ci4_roles')->where('role_name', 'Receptionist')->get()->getRow()->id ?? 8,
app/Database/Seeds/MultiSchoolUserSeeder.php:226:        $db->table('ci4_users')->insert($data);
app/Controllers/Admin.php:86:            'username' => 'required|min_length[3]|is_unique[ci4_users.username]',
app/Controllers/Admin.php:87:            'email' => 'required|valid_email|is_unique[ci4_users.email]',
app/Controllers/Admin.php:112:            db_connect()->table('ci4_user_roles')->insert([
app/Controllers/Admin.php:306:        return db_connect()->table('ci4_user_roles')
app/Controllers/Admin/Dashboard.php:136:        $role = $db->table('ci4_users')
app/Controllers/Admin/Dashboard.php:137:            ->select('ci4_roles.name')
app/Controllers/Admin/Dashboard.php:138:            ->join('ci4_user_roles', 'ci4_users.id = ci4_user_roles.user_id')
app/Controllers/Admin/Dashboard.php:139:            ->join('ci4_roles', 'ci4_user_roles.role_id = ci4_roles.id')
app/Controllers/Admin/Dashboard.php:140:            ->where('ci4_users.id', $userID)
app/Controllers/Admin/Dashboard.php:141:            ->where('ci4_roles.name', 'superadmin')
app/Controllers/Admin/Users.php:33:        $users = $db->table('ci4_users')
app/Controllers/Admin/Users.php:34:            ->select('ci4_users.*, ci4_roles.name as role_name, schools.name as school_name')
app/Controllers/Admin/Users.php:35:            ->join('ci4_user_roles', 'ci4_users.id = ci4_user_roles.user_id', 'left')
app/Controllers/Admin/Users.php:36:            ->join('ci4_roles', 'ci4_user_roles.role_id = ci4_roles.id', 'left')
app/Controllers/Admin/Users.php:37:            ->join('school_users', 'ci4_users.id = school_users.user_id', 'left')
app/Controllers/Admin/Users.php:39:            ->orderBy('ci4_users.username', 'ASC')
app/Controllers/Admin/Users.php:81:            'username' => 'required|min_length[3]|max_length[50]|is_unique[ci4_users.username]',
app/Controllers/Admin/Users.php:82:            'email' => 'required|valid_email|is_unique[ci4_users.email]',
app/Controllers/Admin/Users.php:108:            $db->table('ci4_users')->insert($userData);
app/Controllers/Admin/Users.php:113:            $db->table('ci4_user_roles')->insert([
app/Controllers/Admin/Users.php:162:        $userRole = $db->table('ci4_user_roles')
app/Controllers/Admin/Users.php:197:            'username' => "required|min_length[3]|max_length[50]|is_unique[ci4_users.username,id,{$id}]",
app/Controllers/Admin/Users.php:198:            'email' => "required|valid_email|is_unique[ci4_users.email,id,{$id}]",
app/Controllers/Admin/Users.php:228:            $db->table('ci4_users')->where('id', $id)->update($userData);
app/Controllers/Admin/Users.php:232:            $db->table('ci4_user_roles')->where('user_id', $id)->delete();
app/Controllers/Admin/Users.php:233:            $db->table('ci4_user_roles')->insert([
app/Controllers/Admin/Users.php:287:        return $db->table('ci4_roles')
app/Controllers/Admin/Users.php:318:        $role = $db->table('ci4_users')
app/Controllers/Admin/Users.php:319:            ->select('ci4_roles.name')
app/Controllers/Admin/Users.php:320:            ->join('ci4_user_roles', 'ci4_users.id = ci4_user_roles.user_id')
app/Controllers/Admin/Users.php:321:            ->join('ci4_roles', 'ci4_user_roles.role_id = ci4_roles.id')
app/Controllers/Admin/Users.php:322:            ->where('ci4_users.id', $userID)
app/Controllers/Admin/Users.php:323:            ->where('ci4_roles.name', 'superadmin')
app/Controllers/Admin/Schools.php:205:        $role = $db->table('ci4_users')
app/Controllers/Admin/Schools.php:206:            ->select('ci4_roles.name')
app/Controllers/Admin/Schools.php:207:            ->join('ci4_user_roles', 'ci4_users.id = ci4_user_roles.user_id')
app/Controllers/Admin/Schools.php:208:            ->join('ci4_roles', 'ci4_user_roles.role_id = ci4_roles.id')
app/Controllers/Admin/Schools.php:209:            ->where('ci4_users.id', $userID)
app/Controllers/Admin/Schools.php:210:            ->where('ci4_roles.name', 'superadmin')
app/Controllers/ParentPortal.php:91:            ->select('grades.*, assignments.title as assignment_title, ci4_users.full_name as teacher_name')
app/Controllers/ParentPortal.php:93:            ->join('ci4_users', 'ci4_users.id = grades.teacher_id', 'left')
app/Controllers/ParentPortal.php:188:            ->select('ci4_users.id, ci4_users.full_name, ci4_users.email, ci4_users.photo, school_classes.class_name')
app/Controllers/ParentPortal.php:189:            ->join('ci4_users', 'ci4_users.id = student_parent.student_id')
app/Controllers/ParentPortal.php:190:            ->join('student_enrollments', 'student_enrollments.student_id = ci4_users.id', 'left')
app/Controllers/ParentPortal.php:193:            ->groupBy('ci4_users.id')
app/Controllers/ParentPortal.php:210:        return db_connect()->table('ci4_users')
app/Controllers/ParentPortal.php:211:            ->select('ci4_users.*, school_classes.class_name')
app/Controllers/ParentPortal.php:212:            ->join('student_enrollments', 'student_enrollments.student_id = ci4_users.id', 'left')
app/Controllers/ParentPortal.php:214:            ->where('ci4_users.id', $childId)
